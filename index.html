<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mutant Elite: Overdrive 8.0 - Social Update</title>
    <style>
        :root { 
            --p: #00f2fe; --g: #4dfa66; --y: #f1c40f; --r: #ff0055; 
            --purp: #bc13fe; --ultra: #ff00ff; --gold: #ffd700; --sing: #6a0dad; --bg: #010103; 
        }
        
        body { 
            text-align: center; font-family: 'Orbitron', sans-serif; 
            background: var(--bg); color: white; margin: 0; overflow: hidden; height: 100vh;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        .top-bar { 
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0, 0, 0, 0.9); padding: 10px 15px; 
            border-bottom: 2px solid var(--p); backdrop-filter: blur(15px);
            position: relative; z-index: 100;
        }

        /* UI Containers */
        .side-menu {
            position: fixed; right: 10px; top: 80px; display: flex; flex-direction: column; gap: 10px; z-index: 100;
        }
        .side-btn { 
            background: rgba(0,0,0,0.8); border: 1px solid var(--p); color: #fff; 
            padding: 10px; border-radius: 8px; font-size: 10px; cursor: pointer;
        }

        .cases-container { 
            position: fixed; left: 10px; top: 80px; width: 90px; 
            max-height: 80vh; overflow-y: auto; padding: 5px;
            display: flex; flex-direction: column; gap: 8px; z-index: 90;
            scrollbar-width: none;
        }
        .cases-container::-webkit-scrollbar { display: none; }

        .case-card { 
            width: 100%; min-height: 80px; background: rgba(20,20,30,0.8); 
            border: 2px solid; border-radius: 12px; cursor: pointer; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 9px; transition: 0.2s;
        }
        .case-card:active { transform: scale(0.9); }

        #btn { 
            width: 130px; height: 130px; border-radius: 50%; border: 4px solid #fff; 
            position: absolute; cursor: pointer; font-weight: 900; 
            z-index: 10; background: radial-gradient(circle, var(--p), #000);
            color: #fff; box-shadow: 0 0 25px var(--p); display: none;
            align-items: center; justify-content: center; transition: transform 0.05s;
        }

        /* Modals & Social */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.92); z-index: 2000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .modal { background: #0a0a15; padding: 20px; border-radius: 20px; border: 1px solid var(--p); width: 90%; max-width: 400px; max-height: 80vh; overflow-y: auto; }
        
        .tab-content { display: none; margin-top: 15px; }
        .active-tab { display: block; }
        
        .chat-box { height: 200px; overflow-y: auto; background: #000; border: 1px solid #333; padding: 10px; text-align: left; font-size: 12px; margin-bottom: 10px; }
        .chat-msg { margin-bottom: 5px; border-bottom: 1px solid #111; padding-bottom: 2px; }
        
        .leader-row { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #222; font-size: 13px; }
        
        #xp-bar { position: fixed; bottom: 0; height: 6px; width: 0%; background: var(--p); box-shadow: 0 0 10px var(--p); transition: 0.3s; }
        
        input { width: 100%; padding: 10px; margin: 5px 0; background: #111; border: 1px solid var(--p); color: #fff; border-radius: 8px; box-sizing: border-box; }
        .main-btn { width: 100%; padding: 12px; background: var(--p); border: none; border-radius: 8px; font-weight: 900; cursor: pointer; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

<canvas id="canvas"></canvas>

<div id="auth-screen" class="overlay" style="display:flex;">
    <div class="modal">
        <h2 style="color:var(--p)">MUTANT ELITE 8.0</h2>
        <input type="text" id="nick" placeholder="–ù–Ü–ö–ù–ï–ô–ú">
        <input type="password" id="pass" placeholder="–ü–ê–†–û–õ–¨">
        <button class="main-btn" onclick="handleAuth()">–£–í–Ü–ô–¢–ò –í –ú–ï–†–ï–ñ–£</button>
    </div>
</div>

<div id="social-panel" class="overlay">
    <div class="modal">
        <div style="display:flex; gap:5px; margin-bottom:15px;">
            <button class="side-btn" onclick="openTab('chat')">–ß–ê–¢</button>
            <button class="side-btn" onclick="openTab('leaders')">–¢–û–ü</button>
            <button class="side-btn" onclick="openTab('clans')">–ö–õ–ê–ù–ò</button>
            <button class="side-btn" style="background:var(--r)" onclick="closeSocial()">X</button>
        </div>

        <div id="chat" class="tab-content active-tab">
            <div class="chat-box" id="chat-box"></div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="chat-input" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...">
                <button onclick="sendMsg()" style="background:var(--p); border:none; border-radius:5px; padding:0 15px;">></button>
            </div>
        </div>

        <div id="leaders" class="tab-content">
            <h3 style="color:var(--y)">–¢–û–ü –ú–£–¢–ê–ù–¢–Ü–í</h3>
            <div id="leader-list"></div>
        </div>

        <div id="clans" class="tab-content">
            <h3 style="color:var(--g)">–ö–õ–ê–ù–ò</h3>
            <input type="text" id="clan-name" placeholder="–ù–∞–∑–≤–∞ –∫–ª–∞–Ω—É">
            <button class="main-btn" style="background:var(--g)" onclick="createClan()">–°–¢–í–û–†–ò–¢–ò (100k)</button>
            <div id="clan-list" style="margin-top:10px;"></div>
        </div>
    </div>
</div>

<div class="top-bar">
    <div style="font-size:10px; text-align:left;">
        <div style="color:var(--p)">üß¨ LVL <span id="lvl">1</span></div>
        <div style="color:var(--y)">üí∞ <span id="score">0</span></div>
    </div>
    <div style="font-size:14px; font-weight:900;">MUTANT ELITE</div>
    <button onclick="toggleInv()" style="background:var(--p); border:none; border-radius:5px; padding:5px 10px; font-family:inherit; font-size:10px;">BANK</button>
</div>

<div class="side-menu">
    <button class="side-btn" onclick="openSocial()">COMMUNITY</button>
    <button class="side-btn" onclick="showLvlInfo()">STATS</button>
</div>

<div class="cases-container" id="casesUI"></div>
<div id="xp-bar"></div>
<button id="btn">MUTATE</button>

<div id="opening-overlay" class="overlay">
    <div class="modal" id="reward-area" style="text-align:center;"></div>
</div>

<div id="inv-panel" class="overlay">
    <div class="modal">
        <h3>STORAGE</h3>
        <div id="inv-list"></div>
        <button class="main-btn" style="background:#222; margin-top:10px;" onclick="toggleInv()">–ó–ê–ö–†–ò–¢–ò</button>
    </div>
</div>

<script>
    let score = 0, power = 1, lvl = 1, xp = 0, currentUser = "", currentClan = "–ù–µ–º–∞—î";
    let inventory = [{n: "–ü–µ—Ä–≤–∏–Ω–Ω–∞ –î–ù–ö", p: 1, c: "#00f2fe", sell: 0}];
    let chatMsgs = [{u: "System", m: "–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –≤ Overdrive 8.0!"}];

    const CASE_DATA = [
        { n: "–ë—Ä—É–¥", cost: 50, min: 2, col: "#6d4c41", icon: "üí©" },
        { n: "–°–º—ñ—Ç–Ω–∏–∫", cost: 200, min: 10, col: "#888", icon: "üì¶" },
        { n: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è", cost: 800, min: 40, col: "#4dfa66", icon: "üß™" },
        { n: "–†–∞–¥—ñ–∞—Ü—ñ—è", cost: 2500, min: 120, col: "#ccff00", icon: "‚ò£Ô∏è" },
        { n: "–ù–µ–æ–Ω", cost: 7000, min: 350, col: "#00f2fe", icon: "üíé" },
        { n: "–ö—ñ–±–µ—Ä–Ω–µ—Ç–∏–∫–∞", cost: 15000, min: 800, col: "#bc13fe", icon: "ü§ñ" },
        { n: "–í—É–ª–∫–∞–Ω", cost: 40000, min: 2200, col: "#ff5500", icon: "üî•" },
        { n: "–ü–ª–∞–∑–º–∞", cost: 100000, min: 6000, col: "#ff00ff", icon: "‚ö°" },
        { n: "–ì—ñ–ø–µ—Ä–∑–≤—É–∫", cost: 250000, min: 15000, col: "#0055ff", icon: "üõ∏" },
        { n: "–ö—Ä–∏—Å—Ç–∞–ª", cost: 600000, min: 40000, col: "#00ffff", icon: "üîÆ" },
        { n: "–ó–æ–ª–æ—Ç–æ", cost: 1500000, min: 100000, col: "#ffd700", icon: "üëë" },
        { n: "–¢–µ–º–Ω–∞ –ú–∞—Ç–µ—Ä—ñ—è", cost: 4000000, min: 300000, col: "#330066", icon: "üåë" },
        { n: "–ó—ñ—Ä–∫–∞", cost: 10000000, min: 800000, col: "#fff", icon: "üåü" },
        { n: "–ì–∞–ª–∞–∫—Ç–∏–∫–∞", cost: 30000000, min: 2500000, col: "#6a0dad", icon: "üåå" },
        { n: "–ß–æ—Ä–Ω–∞ –î—ñ—Ä–∞", cost: 100000000, min: 10000000, col: "#000", icon: "üï≥Ô∏è" },
        { n: "–í–∏–º—ñ—Ä X", cost: 500000000, min: 60000000, col: "#ff0055", icon: "‚õ©Ô∏è" },
        { n: "–ö–≤–∞–Ω—Ç", cost: 2000000000, min: 250000000, col: "#00ff88", icon: "‚öõÔ∏è" },
        { n: "–ï—Ñ—ñ—Ä", cost: 10000000000, min: 1500000000, col: "#ffffff", icon: "üëª" },
        { n: "–°–∏–Ω–≥—É–ª—è—Ä–Ω—ñ—Å—Ç—å", cost: 50000000000, min: 8000000000, col: "#ff00ff", icon: "üåÄ" },
        { n: "–¢–≤–æ—Ä–µ—Ü—å", cost: 250000000000, min: 50000000000, col: "#ffd700", icon: "üëÅÔ∏è" }
    ];

    const MUT_NAMES = ["–ì—ñ–±—Ä–∏–¥", "–¢–∏—Ç–∞–Ω", "–§–∞–Ω—Ç–æ–º", "–ó–≤—ñ—Ä", "–ö–æ–ª–æ—Å—Å", "–•–∏–∂–∞–∫", "–ê–≤–∞—Ç–∞—Ä"];

    function initCases() {
        const container = document.getElementById('casesUI');
        CASE_DATA.forEach((c, i) => {
            container.innerHTML += `
                <div class="case-card" onclick="buyCase(${i})" style="border-color:${c.col}">
                    <span style="font-size:20px">${c.icon}</span>
                    <b style="color:${c.col}">${c.n}</b>
                    <span>${formatNum(c.cost)}</span>
                </div>`;
        });
    }

    function formatNum(n) {
        if(n >= 1e12) return (n/1e12).toFixed(1) + 'T';
        if(n >= 1e9) return (n/1e9).toFixed(1) + 'B';
        if(n >= 1e6) return (n/1e6).toFixed(1) + 'M';
        if(n >= 1e3) return (n/1e3).toFixed(1) + 'k';
        return n;
    }

    // --- Auth Logic ---
    function handleAuth() {
        const nick = document.getElementById('nick').value.trim();
        const pass = document.getElementById('pass').value.trim();
        if(!nick || nick.length < 3) return alert("–ù—ñ–∫ –∑–∞–Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π!");
        
        let accs = JSON.parse(localStorage.getItem('mutant_v8_saves') || '{}');
        if(accs[nick]) {
            if(accs[nick].pass !== pass) return alert("–ü–∞—Ä–æ–ª—å –Ω–µ–≤—ñ—Ä–Ω–∏–π!");
            loadData(nick, accs[nick]);
        } else {
            accs[nick] = { pass, score: 0, lvl: 1, xp: 0, inventory: [...inventory], clan: "–ù–µ–º–∞—î" };
            localStorage.setItem('mutant_v8_saves', JSON.stringify(accs));
            loadData(nick, accs[nick]);
        }
    }

    function loadData(nick, data) {
        currentUser = nick; score = data.score; lvl = data.lvl; xp = data.xp; 
        inventory = data.inventory; currentClan = data.clan || "–ù–µ–º–∞—î";
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('btn').style.display = 'flex';
        initCases(); updateUI(); moveBtn();
        
        setInterval(() => { score += (lvl * 5); updateUI(); }, 1000); // Passive DNA
        setInterval(saveGame, 5000);
    }

    function saveGame() {
        if(!currentUser) return;
        let accs = JSON.parse(localStorage.getItem('mutant_v8_saves') || '{}');
        accs[currentUser] = { pass: accs[currentUser].pass, score, lvl, xp, inventory, clan: currentClan };
        localStorage.setItem('mutant_v8_saves', JSON.stringify(accs));
    }

    // --- Game Logic ---
    const clickBtn = document.getElementById('btn');
    clickBtn.onclick = (e) => {
        let critChance = 0.1 + (lvl * 0.005);
        let isCrit = Math.random() < critChance;
        let gain = Math.floor(power * (1 + lvl * 0.2) * (isCrit ? 10 : 1));
        
        score += gain; xp += 25;
        if(xp >= lvl * 500) { lvl++; xp = 0; }
        
        createFloat(e.clientX, e.clientY, `+${formatNum(gain)}`, isCrit ? 'var(--y)' : '#fff');
        updateUI(); moveBtn();
    };

    function buyCase(idx) {
        const c = CASE_DATA[idx];
        if(score < c.cost) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤!");
        score -= c.cost;
        
        const overlay = document.getElementById('opening-overlay');
        overlay.style.display = 'flex';
        document.getElementById('reward-area').innerHTML = `<h2 style="color:${c.col}">–ì–ï–ù–ï–†–£–Æ –ú–£–¢–ê–¶–Ü–Æ...</h2>`;
        
        setTimeout(() => {
            const name = MUT_NAMES[Math.floor(Math.random()*MUT_NAMES.length)] + " " + c.n;
            const pwr = Math.floor(c.min * (1 + Math.random() * 2));
            inventory.push({ n: name, p: pwr, c: c.col, sell: Math.floor(c.cost*0.6) });
            
            document.getElementById('reward-area').innerHTML = `
                <h1 style="color:${c.col}">${name}</h1>
                <p style="font-size:24px">+${formatNum(pwr)} –°–ò–õ–ò</p>
                <button class="main-btn" onclick="document.getElementById('opening-overlay').style.display='none'">–£ –ö–û–õ–ï–ö–¶–Ü–Æ</button>
            `;
            updateUI();
        }, 1000);
    }

    // --- UI/Social ---
    function openSocial() { 
        document.getElementById('social-panel').style.display = 'flex'; 
        updateLeaders(); 
        renderChat();
    }
    function closeSocial() { document.getElementById('social-panel').style.display = 'none'; }
    
    function openTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active-tab'));
        document.getElementById(tabId).classList.add('active-tab');
    }

    function renderChat() {
        const box = document.getElementById('chat-box');
        box.innerHTML = chatMsgs.map(m => `<div class="chat-msg"><b>${m.u}:</b> ${m.m}</div>`).join('');
        box.scrollTop = box.scrollHeight;
    }

    function sendMsg() {
        const inp = document.getElementById('chat-input');
        if(!inp.value) return;
        chatMsgs.push({u: currentUser, m: inp.value});
        if(chatMsgs.length > 20) chatMsgs.shift();
        inp.value = "";
        renderChat();
    }

    function updateLeaders() {
        let accs = JSON.parse(localStorage.getItem('mutant_v8_saves') || '{}');
        let sorted = Object.keys(accs).map(k => ({n: k, s: accs[k].score})).sort((a,b) => b.s - a.s).slice(0, 10);
        document.getElementById('leader-list').innerHTML = sorted.map((u, i) => `
            <div class="leader-row">
                <span>#${i+1} ${u.n}</span>
                <span style="color:var(--y)">${formatNum(u.s)}</span>
            </div>`).join('');
    }

    function createClan() {
        if(score < 100000) return alert("–ú–∞–ª–æ –≥—Ä–æ—à–µ–π!");
        const cn = document.getElementById('clan-name').value;
        if(cn.length < 3) return alert("–ù–∞–∑–≤–∞ –∑–∞ –∫–æ—Ä–æ—Ç–∫–∞!");
        score -= 100000;
        currentClan = cn;
        alert(`–ö–ª–∞–Ω ${cn} —Å—Ç–≤–æ—Ä–µ–Ω–æ!`);
        updateUI();
    }

    function updateUI() {
        document.getElementById('score').innerText = formatNum(score);
        document.getElementById('lvl').innerText = lvl;
        document.getElementById('xp-bar').style.width = (xp / (lvl * 500)) * 100 + "%";
    }

    function moveBtn() {
        const x = Math.random() * (window.innerWidth - 180) + 40;
        const y = Math.random() * (window.innerHeight - 300) + 150;
        clickBtn.style.left = x + 'px';
        clickBtn.style.top = y + 'px';
    }

    function toggleInv() {
        const p = document.getElementById('inv-panel');
        p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
        if(p.style.display === 'flex') {
            document.getElementById('inv-list').innerHTML = inventory.slice().reverse().map((item, i) => `
                <div style="background:#111; padding:10px; margin:5px; border-left:4px solid ${item.c}; display:flex; justify-content:space-between; align-items:center;">
                    <div style="font-size:10px; text-align:left;"><b>${item.n}</b><br>PWR: ${formatNum(item.p)}</div>
                    <button onclick="power=${item.p}; alert('–ï–∫—ñ–ø—ñ—Ä–æ–≤–∞–Ω–æ!')" style="background:var(--g); border:none; padding:5px; border-radius:3px;">USE</button>
                </div>
            `).join('');
        }
    }

    function createFloat(x, y, t, c) {
        const el = document.createElement('div');
        el.style.cssText = `position:fixed; left:${x}px; top:${y}px; color:${c}; font-weight:900; pointer-events:none; z-index:3000; animation: fadeUp 1s forwards;`;
        el.innerText = t; document.body.appendChild(el);
        setTimeout(() => el.remove(), 1000);
    }

    // Canvas Background
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.onresize = resize; resize();
    function anim() {
        ctx.fillStyle = 'rgba(1,1,3,0.15)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        requestAnimationFrame(anim);
    }
    anim();
</script>

<style>
    @keyframes fadeUp {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(-100px); opacity: 0; }
    }
</style>

</body>
</html>