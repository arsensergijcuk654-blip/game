<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mutant Elite: Overdrive 7.0</title>
    <style>
        :root { 
            --p: #00f2fe; --g: #4dfa66; --y: #f1c40f; --r: #ff0055; 
            --purp: #bc13fe; --ultra: #ff00ff; --gold: #ffd700; --sing: #6a0dad; --bg: #010103; 
        }
        
        body { 
            text-align: center; font-family: 'Orbitron', sans-serif; 
            background: var(--bg); color: white; margin: 0; overflow: hidden; height: 100vh;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        .top-bar { 
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0, 0, 0, 0.9); padding: 15px; 
            border-bottom: 2px solid var(--p); backdrop-filter: blur(15px);
            position: relative; z-index: 100;
        }

        .lvl-badge { 
            background: rgba(255,255,255,0.05); border: 1px solid var(--p);
            padding: 8px 15px; border-radius: 12px; cursor: pointer;
        }

        /* Cases Grid */
        .cases-container { 
            left: 10px; top: 100px; width: clamp(70px, 18vw, 100px); 
            max-height: 75vh; overflow-y: auto; padding: 5px;
            display: flex; flex-direction: column; gap: 10px; z-index: 90;
        }
        .case-card { 
            width: 100%; aspect-ratio: 1/1; background: rgba(255,255,255,0.02); 
            border: 2px solid; border-radius: 18px; cursor: pointer; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 10px;
        }

        #btn { 
            width: 140px; height: 140px; border-radius: 50%; border: 5px solid #fff; 
            position: absolute; cursor: pointer; font-weight: 900; 
            z-index: 10; background: radial-gradient(circle, var(--p), #000);
            color: #fff; box-shadow: 0 0 30px var(--p); display: none;
            align-items: center; justify-content: center; transition: transform 0.05s;
        }

        /* Cinematic Opening */
        #opening-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 3000; display: none; align-items: center; justify-content: center; flex-direction: column;
        }
        .holo-circle { width: 180px; height: 180px; border: 3px dashed var(--p); border-radius: 50%; animation: rot 2s linear infinite; }
        @keyframes rot { from { transform: rotate(0); } to { transform: rotate(360deg); } }

        /* Modals */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .modal { background: #0a0a15; padding: 20px; border-radius: 25px; border: 1px solid var(--p); width: 85%; max-width: 320px; }
        .stat-row { display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); margin: 5px 0; border-radius: 8px; font-size: 12px; }

        .inv-item { background: #0f0f1a; margin: 10px 0; padding: 12px; border-radius: 15px; border-left: 5px solid; display: flex; justify-content: space-between; align-items: center; }

        #xp-bar { position: fixed; bottom: 0; height: 10px; width: 0%; background: var(--p); transition: 0.3s; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

<canvas id="canvas"></canvas>

<div id="auth-screen" class="overlay" style="display:flex;">
    <div class="modal">
        <h2 style="color:var(--p)">MUTANT ELITE</h2>
        <input type="text" id="nick" placeholder="–ù–Ü–ö–ù–ï–ô–ú" style="width:100%; padding:10px; margin:10px 0; background:#111; border:1px solid var(--p); color:#fff; border-radius:8px;">
        <input type="password" id="pass" placeholder="–ü–ê–†–û–õ–¨" style="width:100%; padding:10px; margin:10px 0; background:#111; border:1px solid var(--p); color:#fff; border-radius:8px;">
        <button onclick="handleAuth()" style="width:100%; padding:15px; background:var(--p); border:none; border-radius:8px; font-weight:900;">–£–í–Ü–ô–¢–ò</button>
    </div>
</div>

<div id="lvl-modal" class="overlay" onclick="this.style.display='none'">
    <div class="modal" onclick="event.stopPropagation()">
        <h3 style="color:var(--p)">–ï–í–û–õ–Æ–¶–Ü–Ø</h3>
        <div class="stat-row"><span>–†—ñ–≤–µ–Ω—å:</span><span id="st-lvl">1</span></div>
        <div class="stat-row"><span>–ü–∞—Å–∏–≤–Ω–∏–π –î–ù–ö:</span><span id="st-aps">0/—Å</span></div>
        <div class="stat-row"><span>–ú–Ω–æ–∂–Ω–∏–∫ —Å–∏–ª–∏:</span><span id="st-mult">x1.0</span></div>
        <div class="stat-row"><span>–®–∞–Ω—Å –ö—Ä—ñ—Ç–∞:</span><span id="st-crit">10%</span></div>
        <p style="font-size: 10px; color: #888;">–ö–æ–∂–µ–Ω —Ä—ñ–≤–µ–Ω—å –¥–∞—î +3 –î–ù–ö/—Å —Ç–∞ +15% –¥–æ —Å–∏–ª–∏ –∫–ª—ñ–∫—É!</p>
    </div>
</div>

<div id="opening-overlay">
    <div class="holo-circle"></div>
    <div id="reward-area" style="margin-top:20px; text-align:center;"></div>
</div>

<div class="top-bar">
    <div class="lvl-badge" onclick="showLvlInfo()">üß¨ LVL <span id="lvl">1</span></div>
    <div style="color:var(--y); font-size:1.3rem; font-weight:900;">üí∞ <span id="score">0</span></div>
    <button onclick="toggleInv()" style="background:var(--p); border:none; border-radius:8px; padding:10px; font-family:inherit;">BANK</button>
</div>

<div class="cases-container" id="casesUI">
    </div>

<div id="xp-bar"></div>
<button id="btn">MUTATE</button>

<div id="inv-panel" class="overlay">
    <div class="modal">
        <h3 style="color:var(--p)">STORAGE</h3>
        <div id="inv-list" style="max-height: 50vh; overflow-y: auto;"></div>
        <button onclick="toggleInv()" style="width:100%; padding:10px; margin-top:10px; background:#222; color:#fff; border:none; border-radius:8px;">–ó–ê–ö–†–ò–¢–ò</button>
    </div>
</div>

<script>
    let score = 0, power = 1, lvl = 1, xp = 0, currentUser = "";
    let inventory = [{n: "Basic DNA", p: 1, c: "#00f2fe", sell: 0}];
    
    const MUTATIONS = {
        0: ["–°–ª–∏–∑–µ–Ω—å", "–ê–º–µ–±–∞", "–ì—Ä–∏–±–æ–∫", "–õ–∏—á–∏–Ω–∫–∞", "–ú–æ—Ö"],
        1: ["–ö–∏—Å–ª–æ—Ç–Ω–∏–π –ö—Ä—ñ–ª—å", "–ù–µ–æ–Ω–æ–≤–∏–π –©—É—Ä", "–ë—ñ–æ-–ü–∞–≤—É–∫", "–°–∫–ª—è–Ω–∞ –û—Å–∞"],
        2: ["–ö—ñ–±–µ—Ä-–í–æ–≤–∫", "–ü–ª–∞–∑–º–æ–≤–∏–π –ó–º—ñ–π", "–¢–µ—Ö–Ω–æ-–ü–∞—Ä–∞–∑–∏—Ç", "–î—Ä–æ—ó–¥-–í—ñ—Ä—É—Å"],
        3: ["–î–µ–º–æ–Ω –í–æ–≥–Ω—é", "–¢—ñ–Ω—å–æ–≤–∏–π –ñ–Ω–µ—Ü—å", "–ï—Ñ—ñ—Ä–Ω–∏–π –°–∫–∞—Ç", "–ü—É–ª—å—Å–∞—Ä"],
        4: ["–¢–∏—Ç–∞–Ω–æ–≤–∞ –ì—ñ–¥—Ä–∞", "–Ø–¥–µ—Ä–Ω–∏–π –ì–æ–ª–µ–º", "–°—Ç–∞–ª–µ–≤–∏–π –ê–Ω–≥–µ–ª"],
        5: ["–î—Ä–∞–∫–æ–Ω –ü—É—Å—Ç–æ—Ç–∏", "–ú–∞—Å—Ç–µ—Ä –ú–∞—Ç–µ—Ä—ñ—ó", "–ó–æ—Ä—è–Ω–∏–π –§–µ–Ω—ñ–∫—Å"],
        6: ["–ë–æ–≥ –•–∞–æ—Å—É", "–¢–≤–æ—Ä–µ—Ü—å –°–≤—ñ—Ç—ñ–≤", "–ì–∞–ª–∞–∫—Ç–∏—á–Ω–∏–π –†–æ–∑—É–º"],
        7: ["–°–∏–Ω–≥—É–ª—è—Ä–Ω—ñ—Å—Ç—å", "–ê–±—Å–æ–ª—é—Ç–Ω–µ –ù—ñ—â–æ", "–ö–æ–¥ –í—Å–µ—Å–≤—ñ—Ç—É"]
    };

    const CASE_DATA = [
        { cost: 50, min: 2, col: "#888", icon: "üì¶" },
        { cost: 250, min: 15, col: "#4dfa66", icon: "‚ò£Ô∏è" },
        { cost: 1200, min: 70, col: "#00f2fe", icon: "üîÆ" },
        { cost: 5000, min: 300, col: "#bc13fe", icon: "üî•" },
        { cost: 20000, min: 1500, col: "#ff0055", icon: "üß¨" },
        { cost: 100000, min: 7000, col: "#ff00ff", icon: "üëë" },
        { cost: 500000, min: 50000, col: "#ffd700", icon: "üåå" },
        { cost: 2500000, min: 300000, col: "#6a0dad", icon: "üï≥Ô∏è" }
    ];

    function initCases() {
        const container = document.getElementById('casesUI');
        CASE_DATA.forEach((c, i) => {
            container.innerHTML += `<div class="case-card" onclick="buyCase(${i})" style="border-color:${c.col}">${c.icon}<span>${c.cost >= 1000 ? (c.cost/1000)+'k' : c.cost}</span></div>`;
        });
    }
    initCases();

    function handleAuth() {
        const nick = document.getElementById('nick').value.trim();
        const pass = document.getElementById('pass').value.trim();
        if(!nick) return;
        let accs = JSON.parse(localStorage.getItem('mutant_v7_saves') || '{}');
        if(accs[nick]) {
            if(accs[nick].pass !== pass) return alert("Wrong pass!");
            loadData(nick, accs[nick]);
        } else {
            accs[nick] = { pass, score: 0, lvl: 1, xp: 0, inventory: [...inventory] };
            localStorage.setItem('mutant_v7_saves', JSON.stringify(accs));
            loadData(nick, accs[nick]);
        }
    }

    function loadData(nick, data) {
        currentUser = nick; score = data.score; lvl = data.lvl; xp = data.xp; inventory = data.inventory;
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('btn').style.display = 'flex';
        updateUI(); moveBtn();
        setInterval(() => { score += (lvl * 3); updateUI(); }, 1000);
        setInterval(() => {
            if(!currentUser) return;
            let accs = JSON.parse(localStorage.getItem('mutant_v7_saves') || '{}');
            accs[currentUser] = { pass: accs[currentUser].pass, score, lvl, xp, inventory };
            localStorage.setItem('mutant_v7_saves', JSON.stringify(accs));
        }, 5000);
    }

    const clickBtn = document.getElementById('btn');
    clickBtn.onclick = (e) => {
        let isCrit = Math.random() < (0.1 + lvl*0.005);
        let gain = Math.floor(power * (1 + lvl*0.15) * (isCrit ? 6 : 1));
        score += gain; xp += 30;
        
        if(isCrit) spawnCritEffect(e.clientX, e.clientY);
        createFloat(e.clientX, e.clientY, `+${gain}`, isCrit ? 'var(--y)' : '#fff');
        
        if(xp >= lvl * 350) { lvl++; xp = 0; }
        updateUI(); moveBtn();
    };

    function buyCase(idx) {
        const c = CASE_DATA[idx];
        if(score < c.cost) return;
        score -= c.cost;
        
        const overlay = document.getElementById('opening-overlay');
        overlay.style.display = 'flex';
        document.getElementById('reward-area').innerHTML = `<h2 style="color:${c.col}">–ì–ï–ù–ï–†–ê–¶–Ü–Ø...</h2>`;
        
        setTimeout(() => {
            const pool = MUTATIONS[idx];
            const name = pool[Math.floor(Math.random() * pool.length)];
            const pwr = Math.floor(c.min * (1 + Math.random()));
            inventory.push({ n: name, p: pwr, c: c.col, sell: Math.floor(c.cost*0.5) });
            document.getElementById('reward-area').innerHTML = `
                <h1 style="color:${c.col}; margin:0;">${name}</h1>
                <p style="font-size:20px;">+${pwr} –°–ò–õ–ò</p>
                <button onclick="document.getElementById('opening-overlay').style.display='none'" style="padding:10px 20px; background:${c.col}; border:none; border-radius:8px; font-weight:900; margin-top:15px;">–ó–ê–ë–†–ê–¢–ò</button>
            `;
            updateUI();
        }, 1200);
    }

    function showLvlInfo() {
        document.getElementById('st-lvl').innerText = lvl;
        document.getElementById('st-aps').innerText = (lvl * 3) + "/—Å";
        document.getElementById('st-mult').innerText = "x" + (1 + lvl * 0.15).toFixed(1);
        document.getElementById('st-crit').innerText = (10 + lvl * 0.5).toFixed(1) + "%";
        document.getElementById('lvl-modal').style.display = 'flex';
    }

    function updateUI() {
        document.getElementById('score').innerText = Math.floor(score).toLocaleString();
        document.getElementById('lvl').innerText = lvl;
        document.getElementById('xp-bar').style.width = (xp / (lvl * 350)) * 100 + "%";
    }

    function moveBtn() {
        const x = Math.random() * (window.innerWidth - 250) + 100;
        const y = Math.random() * (window.innerHeight - 300) + 150;
        clickBtn.style.left = x + 'px';
        clickBtn.style.top = y + 'px';
        clickBtn.style.boxShadow = `0 0 40px ${inventory[inventory.length-1].c}`;
    }

    function toggleInv() {
        const p = document.getElementById('inv-panel');
        p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
        if(p.style.display === 'flex') {
            document.getElementById('inv-list').innerHTML = inventory.map((item, i) => `
                <div class="inv-item" style="border-color:${item.c}">
                    <div><div style="font-size:12px; color:${item.c}">${item.n}</div><b>+${item.p} PWR</b></div>
                    <div style="display:flex; gap:5px;">
                        <button onclick="power=${item.p};toggleInv()" style="background:var(--g); border:none; padding:8px; border-radius:5px; font-weight:900;">USE</button>
                        <button onclick="sell(${i})" style="background:var(--r); border:none; padding:8px; border-radius:5px; color:#fff;">üí∞${item.sell}</button>
                    </div>
                </div>
            `).reverse().join('');
        }
    }

    function sell(i) {
        if(inventory.length <= 1) return;
        score += inventory[i].sell;
        inventory.splice(i, 1);
        toggleInv(); toggleInv(); updateUI();
    }

    function createFloat(x, y, t, c) {
        const el = document.createElement('div');
        el.style.position = 'fixed'; el.style.left = x+'px'; el.style.top = y+'px';
        el.style.color = c; el.style.fontWeight = '900'; el.style.animation = 'rot 0.8s forwards';
        el.innerText = t; document.body.appendChild(el);
        setTimeout(() => el.remove(), 800);
    }

    function spawnCritEffect(x, y) {
        ctx.fillStyle = 'rgba(255,255,255,0.4)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
    }

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.onresize = resize; resize();
    function anim() {
        ctx.fillStyle = 'rgba(1,1,3,0.2)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        requestAnimationFrame(anim);
    }
    anim();
</script>
</body>
</html>